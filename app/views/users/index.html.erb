<!DOCTYPE html>
<% provide(:title, "Users") %>

<div class="row">
	 <div class="col-xs-4 col-sm-4 col-md-2">
	 <div class="clearfix visible-xs"></div>
	 	<%= form_tag users_path, :method => :get do %>
                      		<%= hidden_field_tag :direction, params[:direction] %>
  							<%= hidden_field_tag :sort, params[:sort] %> 							
    						<%= text_field_tag :search, params[:search], {:class => "form-control col-lg-8", :placeholder => "Search"} %>
					  <% end %>  
	 </div>	
	 <div class="col-xs-4 col-sm-4 col-md-3">	      
		<div class="btn-toolbar">
			<div class="btn-group">
				<button class="btn dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="100">Sort By <b class="caret"></b></button>
					<ul class="dropdown-menu">
						<li><%= sort_link 'ID', :id %></li>
						<li><%= sort_link 'Email', :email %></li>
					</ul>
			</div>                   
	    </div>
    </div>	
</div>

<div class="row">
          <div class="col-lg-12">
          	<center><div class="alert"><%= notice %><%= alert %></div></center>
            <div class="page-header">
              <h1 id="tables">Users</h1>
            </div>
            <div class="bs-example">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>User Email</th>
                    <th>Registered Date</th>
                    <th>Confirmed?</th>          
                    <th>Last Sign In</th>
                    <th>Sign In Count</th>
                    <th>Type of User</th>
                    <th>Edit User</th>
                    <th>Remove User</th>
                  </tr>
                </thead>
                
                	<tbody>
					    <% @users.each do |user| %>
					      <tr>
					        <td><%= user.id %></td>
					        <td><%= user.email %></td>
					        <td><%= user.created_at.strftime('%Y-%m-%d @ %l:%M%P' ' EST') %></td>
					        <% if user.confirmed_at? == true %>
					        <td>Yes</td>
					        <% else %>
					        <td>No</td>
					        <% end %>
					        <td><%= user.last_sign_in_at.strftime('%Y-%m-%d @ %l:%M%P' ' EST')  %></td>
					        <td><%= user.sign_in_count %></td>
					        <td>
					        <% if user.has_role? :admin %>			        	
						        	<span class="label label-primary">Admin</span>  |  
						        	<%= link_to 'Remove Admin', removeadmin_path(user), :method => :post %>				        	
					        <% else %>	        	
							        <span class="label label-default">User</span>  |  
							        <%= link_to 'Make Admin', makeadmin_path(user), :method => :post %>			        
					        <% end %>
					        </td>
					        
					        <td><%= link_to 'Edit', edit_user_registration_path(user) %></td>		
					        		        
					       	<td><%= link_to "Destroy", destroy_user_path(user), method: :delete, data: { confirm: "Are You sure?" } %></td>
					      </tr>
					    <% end %>
					  </tbody>
                  
                
              </table>
            </div>
          </div>
        </div>
      </div>
       <center><%= will_paginate @users, renderer: BootstrapPagination::Rails %></center>
</html>


